<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <title>ç®¡ç†å‘˜é¡µé¢</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/admin.css') }}">
</head>
<body>
  <div class="container">
    <h1 class="main-title">ç®¡ç†å‘˜ç•Œé¢ï¼šæŸ¥çœ‹æ‰€æœ‰ç”¨æˆ·çš„å¯¹è¯è®°å½•</h1>

    {% for username, conversations in user_conversations.items() %}
      {% if username != 'admin' %}
      <div class="user-block">
        <h2 class="username">ğŸ‘¤ ç”¨æˆ·ï¼š{{ username }}</h2>

        {% if conversations %}
          {% for conv in conversations %}
            <div class="conversation">
              <h3 class="conversation-title">ğŸ’¬ {{ conv.conversation }}</h3>

              {% if conv.texts %}
                <ul class="message-list">
                  {% for t in conv.texts %}
                    <li class="message {% if loop.index0 % 2 == 0 %}user-msg{% else %}bot-msg{% endif %}">
                      <div class="meta">
                        <span class="role">{% if loop.index0 % 2 == 0 %}ç”¨æˆ·{% else %}ç³»ç»Ÿ{% endif %}</span>
                        <span class="timestamp">{{ t.timestamp }}</span>
                      </div>
                      <div class="content">{{ t.content }}</div>
                    </li>
                  {% endfor %}
                </ul>
              {% else %}
                <p class="no-data">æ— è®°å½•</p>
              {% endif %}
            </div>
          {% endfor %}
        {% else %}
          <p class="no-data">æ— å¯¹è¯è®°å½•</p>
        {% endif %}
      </div>
     {% endif %}
    {% endfor %}

    <div class="footer">
      <a class="logout" href="{{ url_for('logout') }}">ğŸ”’ é€€å‡ºç™»å½•</a>
    </div>
  </div>
</body>
</html>
