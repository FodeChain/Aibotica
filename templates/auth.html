<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8" />
  <title>登录 / 注册</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/auth.css') }}">
</head>
<body>

<div class="auth-container">
  <div class="tabs">
    <div class="tab active" id="login-tab">登录</div>
    <div class="tab" id="register-tab">注册</div>
  </div>

  <!-- 登录表单 -->
  <form method="POST" id="login-form" class="active" action="{{ url_for('login') }}">
    {% if login_error %}
      <div class="error-msg">{{ login_error }}</div>
    {% endif %}
    <input type="text" name="username" placeholder="用户名" required autocomplete="username" />
    <input type="password" name="password" placeholder="密码" required autocomplete="current-password" />
    <button type="submit">登录</button>
    <p class="switch-link">没有账号？<a id="to-register">去注册</a></p>
  </form>

  <!-- 注册表单 -->
  <form method="POST" id="register-form" action="{{ url_for('register') }}">
    {% if register_error %}
      <div class="error-msg">{{ register_error }}</div>
    {% endif %}
    <input type="text" name="username" placeholder="用户名" required autocomplete="username" />
    <input type="password" name="password" placeholder="密码" required autocomplete="new-password" />
    <button type="submit">注册</button>
    <p class="switch-link">已有账号？<a id="to-login">去登录</a></p>
  </form>
</div>

<script>
  const loginTab = document.getElementById('login-tab');
  const registerTab = document.getElementById('register-tab');
  const loginForm = document.getElementById('login-form');
  const registerForm = document.getElementById('register-form');
  const toRegister = document.getElementById('to-register');
  const toLogin = document.getElementById('to-login');

  function showLogin() {
    loginTab.classList.add('active');
    registerTab.classList.remove('active');
    loginForm.classList.add('active');
    registerForm.classList.remove('active');
  }

  function showRegister() {
    loginTab.classList.remove('active');
    registerTab.classList.add('active');
    loginForm.classList.remove('active');
    registerForm.classList.add('active');
  }

  loginTab.onclick = showLogin;
  registerTab.onclick = showRegister;
  toRegister.onclick = showRegister;
  toLogin.onclick = showLogin;
</script>

</body>
</html>
